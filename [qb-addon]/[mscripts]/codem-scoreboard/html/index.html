<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
    <script src="./vue.global.js"></script>
    <script src="./vuex.global.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
</head>

<body>
    <div id="app">

        <transition name="open">
            <div class="left-panel" v-if="isOpen">
                <img @click="Close" src="./images/close-button.png" class="close-button ">

                <img :src="playerInformations.playerPP" class="pp-overlay">
                <div class="left-panel-wrapper">
                    <div class="title">
                        <h1 class="server-name">{{serverName}}</h1>
                        <h1 class="scoreboard-title">{{locale.scoreboard}}</h1>
                    </div>
                    <div class="line"></div>
                    <div class="player-information">
                        <div class="player-information-left">
                            <div class="player-pp-container" :style="isAdmin ? {border: '0.125rem solid #FF636A'} : { border: '0.125rem solid white'}">
                                <img class="player-pp" :src="playerInformations.playerPP">
                            </div>
                            <div class="player-name-container">
                                <p class="player-name">{{locale.hello}}, {{playerInformations.playerName}}</p>
                                <p class="player-job"><span style="color: #FF636A;">{{isAdmin ? 'ADMIN' : ''}}</span> {{playerInformations.jobLabel}}</p>
                            </div>
                        </div>
                        <div :class="{showPlayers:showPlayers}" @click="SetShowPlayers(true)"
                            class="player-information-right">
                            <img class="players-icon" src="./images/players.png">
                            <p class="players-count">{{playersCount}}</p>
                        </div>

                    </div>
                    <div class="line"></div>
                    <template v-if="!showPlayers">

                        <div class="swiper" style="width: 100%;">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide " v-for="(job, key, index) in jobs"
                                    style="display: flex; align-items: center; justify-content: center;">
                                    <div class="job-container" :style="{'background-image': 'url('+job.bg+')'}">
                                        <div v-if="isAdmin" @click="SetJob(key)" :style="{'background-color': addAlpha(job.textColor, 0.6), border:'1px solid '+job.textColor+' '}" class="setjob-container">
                                            <img v-if="key == playerInformations.jobName"  src="./images/tik.png">
                                            <img v-else  src="./images/+_.png">
                                        </div>
                                        <img :src="job.logo">
                                        <p :style="{color:job.textColor}">{{job.playerCount}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="robberies" :class="{robberyAnim : isOpen}">
                            <div class="robberies-wrapper no-scrollbar">
                                <div class="robbery" v-for="(robbery, key, index) in robberies">
                                    <img    :src="robbery.bgImage" class="robbery-image">
                                    <div  class="robbery-wrapper">
                                        <div @click="ToggleRobbery(key)" class="robbery-toggle-button" v-if="isAdmin">
                                            <img v-if="!robbery.disabledByServer" src="./images/x.png">
                                            <img v-else src="./images/+.png">

                                        </div>
                                        <h1>{{robbery.label}}</h1>
                                        <div class="robbery-button"
                                            :class="{disabled : !robbery.canRob || robbery.disabledByServer, active : robbery.canRob}">

                                            {{!robbery.canRob || robbery.disabledByServer ? locale.disabled :
                                            locale.active}}</div>
                                        <p  @click="SetWaypoint(robbery)">{{!robbery.canRob || robbery.disabledByServer  ?  robbery.disabledByServer ? locale.disabled_by_server :
                                            locale.inadequate_limit : locale.click_waypoint 
                                           }}</p>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </template>
                    <template v-else>
                        <div class="players-text-header">
                            <img @click="showPlayers=false" src="./images/back.png" class="back">
                            <h1>{{locale.players_in_city}}</h1>
                            <p class="players-count">{{getFilteredPlayers.length}}</p>
                        </div>
                        <div class="search-input-container">
                            <input v-model="filteredPlayer" :placeholder="locale.search_players" type="text">
                            <img src="./images/search.png">
                        </div>
                        <div class="players no-scrollbar">
                            <div class="player" v-for="player in getFilteredPlayers">
                                <div class="player-left">
                                    <div class="player-pp-container">
                                        <img class="player-pp" :src="player.pp">
                                    </div>
                                    <div class="player-name-container">
                                        <p class="player-name">{{player.name}}</p>
                                        <p class="player-job">{{player.job}}</p>
                                    </div>
                                </div>
                                <div class="player-right" v-if="ShowID">
                                    <p>{{player.id}}</p>
                                </div>
                                <div class="player-right">
                                    <img src="./images/ping.png">
                                    <p>{{player.ping}}</p>
                                </div>

                            </div>
                        </div>
                    </template>

                </div>
            </div>

        </transition>

    </div>
</body>
<script src="./index.js"></script>

</html>